<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Gallery Animation Demo</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope');

        :root {
          font-size: clamp(1.5rem, 2vw + 1rem, 2.5rem);
          --clr-bg: #020617;
          --clr-text: #fff;
          --clr-primary: #fff;
          
          --hover-intensity: 10rem;
          --hover-smoothness: 70ms; 
          --fall-smoothness: 250ms;
          --perspective: 2000px;
        }

        body {
          height: 100svh;
          display: grid;
          place-items: center;
          font-family: "Manrope", sans-serif;
          background: var(--clr-bg);
          color: var(--clr-text);
          overflow: hidden;
          padding: 2em;
        }

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        nav {  
          /* region */
          --r: calc(var(--max-z) * (var(--p) - 1) + var(--z)); 
          
          /* normalized [0-1]*/
          --r-n: calc(
            (var(--r) - 1) / (var(--max-z) * var(--max-p) - 1)
          );
          
          block-size: min(8rem, 100%);
          inline-size: min(30rem, 100%);

          display: flex;
          align-items: flex-end;
          position: relative;
          
          perspective: var(--perspective);
          transform-style: preserve-3d;
          
          --dir: 0deg;
        }

        @media (max-width: 40rem) {
          nav {
            writing-mode: sideways-rl;
            --dir: -90deg;
          }
        }

        a {  
          flex: 1;
          block-size: 100%;
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
          color: inherit;
          font-size: 1rem;
          cursor: pointer;
          transform-style: preserve-3d;
          
          --ts: calc(
            var(--hover-smoothness) * var(--falloff) +
            var(--fall-smoothness) * (1 - var(--falloff))
          );
          
          --fs: calc(
            .1s * var(--falloff,0) +
            .8s * (1 - var(--falloff,0))
          );
          
          transition: 
            scale var(--op, .15s),
            filter var(--fs),
            transform var(--ts, var(--fall-smoothness)),
            flex .3s
          ;
        }

        a {
          --p-n: calc(var(--i) / (var(--max-p) - 1));
          --diff: calc(var(--p-n) - var(--r-n));  
          --u: calc(abs(var(--diff)) / var(--w)); 
          
          --w: .4;
          --falloff: clamp(calc(0.5 * (1 + cos(min(var(--u), 1) * 180deg))), 0, 1);
          
          --tilt: calc(clamp(-1,var(--diff) * 5, 1) * var(--falloff) * 70deg);
          
          transform: 
            translateZ(calc(var(--falloff) * var(--hover-intensity)))
            rotateY(calc(var(--tilt) * cos(var(--dir))))
            rotateX(calc(var(--tilt) * sin(var(--dir))))
          ;
          
          filter: 
            brightness(max(.5, var(--falloff, 0) * 1.2))
            saturate(var(--falloff, 0))
          ;
        }

        .img {
          background: var(--img);
          background-color: #fff3;
          background-size: cover;
          background-position: center;
          width: 100%;
          height: 100%;
          margin-inline: 0.1em;
        }

        .hover-zone {
          position: absolute;
          inset: 0;
          inset-inline: -3px;
          display: flex;
          z-index: 999;
        }

        .hover-zone > i {
          flex: 1;
          transition: .3s;
        }

        .hover-zone::after {
          position: absolute;
          inset: 0;
        }

        .hover-zone:active::after, 
        .hover-zone:hover:not(:has(> i:hover))::after,
        a:focus-visible .hover-zone::after {
          content: '';
          pointer-events: all;
          --o: 1;
        }

        nav:has(.hover-zone:hover):not(:has(i:hover)), 
        nav:has(a:focus-visible) {
          --z: calc((var(--max-z) + 1) / 2);
        }

        nav:has(.hover-zone:hover):not(:has(i:hover)) a:hover, 
        nav:has(a:focus-visible) a:focus-visible {
          flex: 4;
        }

        /* Focus on tab navigation */
        a:nth-child(1):is(:hover,:focus-visible) ~ * { --p: 1; }
        nav:has(:nth-child(1 of a):is(:hover,:focus-visible)) {--p: 1;}
        nav:has(:nth-child(2 of a):is(:hover,:focus-visible)) {--p: 2;}
        nav:has(:nth-child(3 of a):is(:hover,:focus-visible)) {--p: 3;}
        nav:has(:nth-child(4 of a):is(:hover,:focus-visible)) {--p: 4;}
        nav:has(:nth-child(5 of a):is(:hover,:focus-visible)) {--p: 5;}
        nav:has(:nth-child(6 of a):is(:hover,:focus-visible)) {--p: 6;}
        nav:has(:nth-child(7 of a):is(:hover,:focus-visible)) {--p: 7;}

        nav:has(.hover-zone > i:nth-child(1):hover) {--z: 1;}
        nav:has(.hover-zone > i:nth-child(2):hover) {--z: 2;}
        nav:has(.hover-zone > i:nth-child(3):hover) {--z: 3;}
        nav:has(.hover-zone > i:nth-child(4):hover) {--z: 4;}
        nav:has(.hover-zone > i:nth-child(5):hover) {--z: 5;}
        nav:has(.hover-zone > i:nth-child(6):hover) {--z: 6;}
        nav:has(.hover-zone > i:nth-child(7):hover) {--z: 7;}
    </style>
</head>
<body>
    <nav style="--max-p: 7; --max-z: 7;">
        <a href="#" style="--i: 0;">
            <div class="img" style="--img: url('images/IMG_0913 2.JPG');"></div>
        </a>
        <a href="#" style="--i: 1;">
            <div class="img" style="--img: url('images/IMG_1505 2.JPG');"></div>
        </a>
        <a href="#" style="--i: 2;">
            <div class="img" style="--img: url('images/IMG_1672 2.JPG');"></div>
        </a>
        <a href="#" style="--i: 3;">
            <div class="img" style="--img: url('images/IMG_2618 2.JPG');"></div>
        </a>
        <a href="#" style="--i: 4;">
            <div class="img" style="--img: url('https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=1200&h=1800&fit=crop&q=90');"></div>
        </a>
        <a href="#" style="--i: 5;">
            <div class="img" style="--img: url('https://images.unsplash.com/photo-1448375240586-882707db888b?w=1200&h=1800&fit=crop&q=90');"></div>
        </a>
        <a href="#" style="--i: 6;">
            <div class="img" style="--img: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1200&h=600&fit=crop&q=95');"></div>
        </a>
        
        <div class="hover-zone">
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
        </div>
    </nav>
</body>
</html>
